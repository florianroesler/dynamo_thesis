% preamble
\ProvidesPackage{osm-thesis}

\RequirePackage[l2tabu,orthodox]{nag}
\RequirePackage[T1]{fontenc}
\RequirePackage{textcomp}
\RequirePackage[utf8]{inputenc}
\RequirePackage[dvipsnames,usenames]{xcolor}
\RequirePackage[backend=bibtex,bibencoding=ascii]{biblatex}
\RequirePackage{amsmath}
\RequirePackage{array}
\RequirePackage{blindtext}
\RequirePackage{caption}
\RequirePackage{chngcntr}
\RequirePackage[automark]{scrlayer-scrpage}
\RequirePackage[english,ngerman]{babel}
\RequirePackage{csquotes}
\RequirePackage[nottoc]{tocbibind}
\RequirePackage{colortbl}
\RequirePackage{etoolbox}
\RequirePackage{enumitem}
\RequirePackage{float}
\RequirePackage{footnote}
\RequirePackage{graphicx}
\RequirePackage{listings}
\RequirePackage{makeidx}
\RequirePackage{multirow}
\RequirePackage{scrhack}
\RequirePackage[stretch=9,shrink=15,step=3,tracking=smallcaps,letterspace=75,final,babel=true]{microtype}
\RequirePackage[osf,sc]{mathpazo}
\RequirePackage[scale=.9,semibold]{sourcecodepro}
\RequirePackage[osf]{sourcesanspro}
\RequirePackage{textcase}
\RequirePackage{tocbasic}
\RequirePackage{todonotes}
\AtEndPreamble{ %
	\RequirePackage{hyperref}
}

% determine document class
\@ifclassloaded{scrbook}{\newif\ifisbook\isbooktrue}{\newif\ifisbook\isbookfalse}

% document options
\KOMAoptions{paper=a4,titlepage=firstiscover,open=right,headings=big,DIV=12}
\pagestyle{scrheadings}
\linespread{1.1}
\setlist{itemsep=0pt}
\widowpenalty10000
\clubpenalty10000
\tolerance1000
\ifisbook\addtolength{\oddsidemargin}{\bcor}\fi
\ifisbook\addtolength{\evensidemargin}{-\bcor}\fi
\DisableLigatures{encoding=*,family=tt* }
\AtBeginDocument{
	\hypersetup{pdftitle={\hpititle},pdfsubject={\hpitype},pdfauthor={\hpiauthor},pdfcreator={osm-thesis}, bookmarksnumbered=true,breaklinks=true}
}

% title page
\addtokomafont{title}{\huge}
\addtokomafont{publishers}{\normalfont\normalsize}

% headings
\pagestyle{scrheadings}
\automark[chapter]{chapter}
\automark*[section]{}

% footnotes
\counterwithout*{footnote}{chapter}
\makesavenoteenv{tabular}\makesavenoteenv{table}

% list of contents
\setcounter{tocdepth}{3}
\setcounter{secnumdepth}{3}

% names
\renewcommand\lstlistingname{Quelltext}

% bibliography
\ExecuteBibliographyOptions{backref=false,backrefstyle=three+,url=true,urldate=comp,abbreviate=false,maxnames=20}
\AfterPackage{biblatex}{
	\setcounter{biburllcpenalty}{7000}
	\setcounter{biburlucpenalty}{8000}
	\PreventPackageFromLoading[\errmessage{You tried to load the cite package that is not compatible with biblatex.}]{cite}
}

% captions
\addtokomafont{caption}{\small}
\addtokomafont{captionlabel}{\bfseries}
\setcapindent{\parindent}

% tables
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0cm}}m{#1}}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0cm}}m{#1}}
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0cm}}m{#1}}
\captionsetup[table]{belowskip=.5\baselineskip,aboveskip=.5\baselineskip}

% listings
\lstset{basicstyle=\linespread{1}\ttfamily\small,floatplacement=htbp,captionpos=t,abovecaptionskip=.5\baselineskip,belowcaptionskip=.5\baselineskip,upquote=true,showstringspaces=false,inputencoding=utf8,tabsize=4}
\lstset{literate={á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1 {Á}{{\'A}}1 {É}{{\'E}}1 {Í}{{\'I}}1 {Ó}{{\'O}}1 {Ú}{{\'U}}1 {à}{{\`a}}1 {è}{{\`e}}1 {ì}{{\`i}}1 {ò}{{\`o}}1 {ù}{{\`u}}1 {À}{{\`A}}1 {È}{{\'E}}1 {Ì}{{\`I}}1 {Ò}{{\`O}}1 {Ù}{{\`U}}1 {ä}{{\"a}}1 {ë}{{\"e}}1 {ï}{{\"i}}1 {ö}{{\"o}}1 {ü}{{\"u}}1 {Ä}{{\"A}}1 {Ë}{{\"E}}1 {Ï}{{\"I}}1 {Ö}{{\"O}}1 {Ü}{{\"U}}1 {â}{{\^a}}1 {ê}{{\^e}}1 {î}{{\^i}}1 {ô}{{\^o}}1 {û}{{\^u}}1 {Â}{{\^A}}1 {Ê}{{\^E}}1 {Î}{{\^I}}1 {Ô}{{\^O}}1 {Û}{{\^U}}1 {œ}{{\oe}}1 {Œ}{{\OE}}1 {æ}{{\ae}}1 {Æ}{{\AE}}1 {ß}{{\ss}}1 {ű}{{\H{u}}}1 {Ű}{{\H{U}}}1 {ő}{{\H{o}}}1 {Ő}{{\H{O}}}1 {ç}{{\c c}}1 {Ç}{{\c C}}1 {ø}{{\o}}1 {å}{{\r a}}1 {Å}{{\r A}}1 {€}{{\EUR}}1 {£}{{\pounds}}1 {~}{{\textasciitilde}}1 {-}{{-}}1 }
\makeatletter\renewcommand\verbatim@font{\ttfamily}\makeatother
\makeatletter\renewcommand\lstinline[1][]{ \errmessage{In diesem Template bitte die 'code'-Umgebung nutzen (an Stelle von 'lstinline').} }\makeatother
% \code-Umgebung mit Silbentrennung (Alternative für lstinline)
\newcommand{\code}[1]{\texttt{\selectlanguage{english}#1}}